<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PSX â€“ Port Scanner Xtreme</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <!-- Loader Overlay -->
  <div id="psx-loader" class="psx-loader hidden">
    <div class="psx-loader-wrap">
      <div class="psx-ring"></div>
      <div class="psx-core">PSX</div>
      <div class="psx-sub">Scanningâ€¦</div>
    </div>
  </div>

  <header>
    <div class="logo">âš¡ PSX â€“ Port Scanner Xtreme âš¡</div>
  </header>

  <main class="container">
    <h2>Scan a Host</h2>

    <form id="scanForm" method="post" action="/scan">
      <label for="host">Target Host/IP</label>
      <input
        type="text"
        id="host"
        name="host"
        placeholder="scanme.nmap.org"
        required
      />

      <label for="ports">Ports (e.g., 22,80,443 or 1-1024)</label>
      <input
        type="text"
        id="ports"
        name="ports"
        placeholder="Leave blank for default set"
      />

      <label for="email">Email (optional)</label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="you@example.com"
      />

      <button type="submit">ðŸš€ Scan Now</button>
    </form>

    {% if message %}
    <div class="result">
      <h3>Scan Result</h3>
      <p>{{ message }}</p>
      {% if opened %}
        <p><b>Open Ports:</b> {{ opened }}</p>
      {% endif %}
    </div>
    {% endif %}
  </main>

  <footer>
    <p>Powered by PSX â€“ Port Scanner Xtreme â€¢ Scan only with permission</p>
  </footer>

  <script>
    // Show loader on submit, hide when page renders (back/forward nav safe)
    const form = document.getElementById('scanForm');
    const loader = document.getElementById('psx-loader');

    form?.addEventListener('submit', () => {
      loader?.classList.remove('hidden');
    });

    // If the page is restored from cache (back nav), ensure loader is hidden
    window.addEventListener('pageshow', () => {
      loader?.classList.add('hidden');
    });
  </script>
</body>
</html>
